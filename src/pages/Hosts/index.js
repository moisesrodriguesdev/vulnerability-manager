import React, { useEffect, useState } from "react";
import Table from "./../../Components/Table";
import { FiSearch } from "react-icons/fi";
import api from "./../../services/api";
import Navbar from "./../../Components/NavBar";

const head = {
  ID: "ID",
  created: "Criado",
  modified: "Modificado",
  hostname: "Nome",
  ip_address: "EndereÃ§o IP",
  risk: "Risco",
  vuln_count: "Qtd de vulnerabilidades",
};

const Hosts = () => {
  const [assets, setAssets] = useState(0);
  const [filterAssets, setFilterAssets] = useState("");

  const token = "Token 91f052c60fe5c0c4b6fa323e6bb050c8eef2de68";

  const dataAssets = assets.hasOwnProperty("results")
    ? assets.results
    : [assets];

  useEffect(() => {
    async function getAllAssets() {
      const response = await api.get("assets/", {
        headers: {
          Authorization: token,
        },
        params: {
          vulnerability: filterAssets,
          page_size: 5,
        },
      });

      setAssets(response.data);
    }

    getAllAssets();
  }, [filterAssets]);

  return (
    <>
      <Navbar />
      <div className="content">
      <input
        type="text"
        name="vulnerability"
        className="input-search"
        value={filterAssets}
        onChange={(e) => setFilterAssets(e.target.value)}
      />

      <Table data={assets.results} head={head} />
      </div>

    </>
  );
};

export default Hosts;
