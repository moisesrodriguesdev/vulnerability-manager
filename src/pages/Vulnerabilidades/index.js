import React, { useEffect, useState } from "react";
import Table from "./../../Components/Table";
import api from "./../../services/api";
import { FiSearch } from "react-icons/fi";
import Navbar from "./../../Components/NavBar";

const head = {
  id: "ID",
  title: "TÃ­tulo",
  severity: "Severidade",
  cvss: "CVSS",
  publication_date: "Data",
  asset_count: "Quantidade",
};

const Vulnerabilidade = () => {
  const [vulnerabilidade, setVulnerabilidade] = useState([]);
  const [severity, setSeverity] = useState();

  const token = "Token 91f052c60fe5c0c4b6fa323e6bb050c8eef2de68";

  useEffect(() => {
    async function getAllAssets() {
      const response = await api.get("vulnerabilities", {
        headers: {
          Authorization: token,
        },
        params: {
          severity: severity,
          page_size: 5,
        },
      });

      setVulnerabilidade(response.data);
    }

    getAllAssets();
  }, [severity]);
  return (
    <>
      <Navbar />
      <div className="content">
        <input
          type="text"
          name="severity"
          className="input-search"
          value={severity}
          onChange={(e) => setSeverity(e.target.value)}
        />
        <button type="button" className="button buttonInfoSearch">
          <FiSearch />
        </button>
        <Table data={vulnerabilidade.results} head={head} />
      </div>

    </>
  );
};

export default Vulnerabilidade;
